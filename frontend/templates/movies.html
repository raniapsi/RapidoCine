{% extends "base.html" %}

{% block title %}{{ list_title }} Movies - RapidoCine{% endblock %}

{% block content %}
<div class="App">
    <!-- Header -->
    <div class="header">
        <div class="headerLeft">
            <a href="/">
                <img class="header__icon" src="/static/images/RapidoCineLogo.png" alt="Rapido Logo" />
            </a>
            <a href="/movies" style="textDecoration: none"><span>Films</span></a>
            <a href="/movies/top_rated" style="textDecoration: none"><span>Top Rated</span></a>
            <a href="/movies/watchlist" style="textDecoration: none"><span>Watchlist</span></a>
        </div>
    </div>

    <!-- Movie List -->
    <div class="movie__list">
        <h2 class="list__title">{{ list_title.upper() }}</h2>
        <div class="list__cards">
            {% for movie in movies %}
            <a href="/movie/{{ movie.id }}" style="textDecoration: none; color: white">
                <div class="cards">
                    <!-- Coeur wishlist -->
                    <div class="wishlist-heart {% if watchlist_ids and (movie.id in watchlist_ids) %}active{% endif %}"
                         data-movie-id="{{ movie.id }}">
                        <i class="{% if watchlist_ids and (movie.id in watchlist_ids) %}fas{% else %}far{% endif %} fa-heart"></i>
                    </div>
                    <img class="cards__img" src="{{ movie.poster_url or 'https://via.placeholder.com/300x450?text=No+Image' }}" alt="{{ movie.title }}" />
                    <div class="cards__overlay">
                        <div class="card__title">{{ movie.title }}</div>
                        <div class="card__runtime">
                            {{ movie.year }}
                        </div>
                        <div class="card__description">
                            {{ (movie.plot[:118] + '...') if movie.plot and movie.plot|length > 118 else (movie.plot or 'Aucune description') }}
                        </div>
                    </div>
                </div>
            </a>
            {% else %}
            <div style="color: white; text-align: center; width: 100%; padding: 40px;">
                <h3>No movies found</h3>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}